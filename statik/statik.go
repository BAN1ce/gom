package statik

import (
		"github.com/rakyll/statik/fs"
)

func init() {
	data := "PK\x03\x04\x14\x00\x08\x00\x00\x000\x10dE\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x06\x00\x00\x00app.js'use strict';\n\nvar profile = \"heap\";\nvar data = { gt: [] };\n\nrefresh();\n\n$(\".cpu\").on(\"click\", function() {\n  profile = \"profile\";\n  refresh();\n});\n$(\".heap\").on(\"click\", function() {\n  profile = \"heap\";\n  refresh();\n});\n$(\".refresh\").on(\"click\", function() {\n  refresh(true);\n});\n$(\".filter\").on(\"keyup\", function() {\n  refresh();\n});\n\nvar moreStats = function() {\n  $.ajax('/stats').done(function(d) {\n    data.gt.pop();\n    if (data.gt.length > 115) {\n      data.gt.shift();\n    }\n    data.gt.push([d.goroutine, d.thread, d.block]);\n    // Add zeros, because sparkline draws the chart relatively,\n    // depending on the min-max range of the dataset.\n    data.gt.push([0, 0, 0]);\n    drawCharts();\n    setTimeout(function() {\n      moreStats();\n    }, 1000);\n  });\n};\n\nmoreStats();\n\nfunction refresh(force) {\n  // TODO: cancel the existing request if it's not ciompleted.\n  $('.results').html('Loading, be patient... CPU profile takes 30 seconds.');\n  var f = $('.filter').val();\n  $.get('/p', { profile: profile, filter: f, force: !!force }).done(function(items) {\n    var html = '';\n    for (var i=0; i<items.length; i++) {\n      var item = items[i];\n      var row = '';\n      row += '<td class=\"num\">' + item['flat'] + '</td>';\n      row += '<td class=\"num\">' + item['flat_perc'] + '</td>';\n      row += '<td class=\"num\">' + item['flatsum_perc'] + '</td>';\n      row += '<td class=\"num\">' + item['cum'] + '</td>';\n      row += '<td class=\"num\">' + item['cum_perc'] + '</td>';\n      row += '<td>' + item['name'] + '</td>';\n      html += '<tr>' + row + '</tr>';\n    }\n    $(\".results\").html('<table>' + html + '</table>');\n  }).fail(function(data) {\n    $('.results').html(data);\n  });\n};\n\nfunction drawCharts() {\n  $(\"#tgchart\").sparkline(data.gt, {\n    type: 'bar',\n    height: '40px',\n    barSpacing: 2,\n    barColor: '#1ABC9C',\n    barWidth: 5,\n    stackedBarColor: ['#1ABC9C', '#16A085', '#7F8C8D'],\n  });\n}PK\x07\x08\x8d\x16 \x96|\x07\x00\x00|\x07\x00\x00PK\x03\x04\x14\x00\x08\x00\x00\x00\xb1\x11dE\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\n\x00\x00\x00index.html<!doctype html>\n<html>\n<head>\n  <title></title>\n  <link rel=\"stylesheet\" href=\"//cdn.jsdelivr.net/flat-ui/2.0/css/flat-ui.css\">\n  <style>\n    @import ur(//cdn.jsdelivr.net/flat-ui/2.0/fonts/Flat-UI-Icons.dev.svg);\n    .chart{margin: 20px 0px;}\n    .btn {padding: 2px 13px;}\n    .right{float:right}\n    .filter{width:100%}\n    .container{ width: 800px; margin: 50px auto;}\n    .results { margin: 20px 0px; }\n    .results table { width: 8000px; font-family: monospace; }\n    .results td.num {text-align: right; width: 50px;}\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <div id=\"tgchart\" class=\"chart\"></div>\n    <div class=\"row\">\n        <h3>Profiles</h3>\n        <span class=\"fui-alert-circle\"></span>\n        <p>\n        <span class=\"fui-repeat\"></span>\n          <button type=\"button\" class=\"cpu btn btn-primary\">CPU</button>\n          <button type=\"button\" class=\"heap btn btn-primary\">Heap</button>\n          <button type=\"button\" class=\"refresh btn right\">Refresh</button>\n        </p>\n        <input type=\"text\" class=\"filter\" placeholder=\"Focus by regex... You can filter by package, type or function name.\">\n        <div class=\"row\"><div class=\"results\"></div></div>\n      </div>\n  </div>\n  <!-- TODO(jbd): Add the remote resources to the public folder,\n  otherwise I can't use this program on no-Wifi flights. -->\n  <script src=\"//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\"></script>\n  <script src=\"//cdnjs.cloudflare.com/ajax/libs/jquery-sparklines/2.1.2/jquery.sparkline.min.js\"></script>\n  <script type=\"text/javascript\" src=\"/app.js\"></script>\n</body>\n</html>\nPK\x07\x08\x8b\x9d\x17I?\x06\x00\x00?\x06\x00\x00PK\x01\x02\x14\x03\x14\x00\x08\x00\x00\x000\x10dE\x8d\x16 \x96|\x07\x00\x00|\x07\x00\x00\x06\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xa4\x81\x00\x00\x00\x00app.jsPK\x01\x02\x14\x03\x14\x00\x08\x00\x00\x00\xb1\x11dE\x8b\x9d\x17I?\x06\x00\x00?\x06\x00\x00\n\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xa4\x81\xb0\x07\x00\x00index.htmlPK\x05\x06\x00\x00\x00\x00\x02\x00\x02\x00l\x00\x00\x00'\x0e\x00\x00\x00\x00"
	fs.Register(data)
}
